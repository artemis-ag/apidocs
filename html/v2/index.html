<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Agrilyst — API Docs - v2</title>
  <meta name="description" content="Agrilyst is the intelligence platform for indoor farms.">
  <link rel="stylesheet" href="../assets/css/app.min.css">

  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="../favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="../favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="../favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="../favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="../favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#F9F9FA" />
  <meta name="msapplication-TileImage" content="../mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="../mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="../mstile-150x150.png" />
  <meta name="msapplication-wide310x150logo" content="../mstile-310x150.png" />
  <meta name="msapplication-square310x310logo" content="../mstile-310x310.png" />
</head>
<body>

  <header class="header">
    <div class="inner">
      <a href="http://agrilyst.com" class="header__logo">Agrilyst</a>

      <a href="#" class="nav-toggle js-menu-toggle">
        <span class="nav-toggle__bar"></span>
        <span class="nav-toggle__bar"></span>
        <span class="nav-toggle__bar"></span>
      </a>

      <h1 class="header__title">
        <span class="lg">API Documentation v2.0</span>
        <span class="sm">API Docs</span>
      </h1>
    </div>
  </header>

  <div class="container">
    <nav class="nav">
      <div class="nav__content">
        <h3 class="nav__heading">API Documentation v2.0</h3>
        <ul class="nav-menu">
          <li class="nav-menu__item is-current"><a href="#introduction" class="nav-menu__link">Introduction</a></li>
          <li class="nav-menu__subheading">General</li>
          <li class="nav-menu__item"><a href="#apiaccount" class="nav-menu__link">API Account</a></li>
          <li class="nav-menu__item"><a href="#authentication" class="nav-menu__link">Authentication</a></li>
          <li class="nav-menu__item"><a href="#health" class="nav-menu__link">Health Check</a></li>
          <li class="nav-menu__item"><a href="#version" class="nav-menu__link">Version</a></li>
          <li class="nav-menu__subheading">Sensors</li>
          <li class="nav-menu__item"><a href="#create-sensor" class="nav-menu__link">Create Sensor</a></li>
          <li class="nav-menu__item"><a href="#list-sensors" class="nav-menu__link">List Sensors</a></li>
          <li class="nav-menu__item"><a href="#show-sensor" class="nav-menu__link">Show Sensor</a></li>
          <li class="nav-menu__item"><a href="#update-sensor" class="nav-menu__link">Update Sensor</a></li>
          <li class="nav-menu__item"><a href="#remove-sensor" class="nav-menu__link">Remove Sensor</a></li>
          <li class="nav-menu__subheading">Sensor Metrics</li>
          <li class="nav-menu__item"><a href="#create-sensor-metric" class="nav-menu__link">Create Sensor Metric</a></li>
          <li class="nav-menu__item"><a href="#list-sensor-metrics" class="nav-menu__link">List Sensor Metrics</a></li>
          <li class="nav-menu__item"><a href="#show-sensor-metric" class="nav-menu__link">Show Sensor Metric</a></li>
          <li class="nav-menu__item"><a href="#update-sensor-metric" class="nav-menu__link">Update Sensor Metric</a></li>
          <li class="nav-menu__item"><a href="#remove-sensor-metric" class="nav-menu__link">Remove Sensor Metric</a></li>
          <li class="nav-menu__subheading">Sensor Data</li>
          <li class="nav-menu__item"><a href="#save-sensor-data" class="nav-menu__link">Save Sensor Data</a></li>
          <li class="nav-menu__subheading">Nutrient Readings</li>
          <li class="nav-menu__item"><a href="#list-tanks" class="nav-menu__link">List Tanks</a></li>
          <li class="nav-menu__item"><a href="#list-tank-metrics" class="nav-menu__link">List Tank Metrics</a></li>
          <li class="nav-menu__item"><a href="#save-tank-reading" class="nav-menu__link">Save Tank Reading</a></li>
        </ul>
      </div>
    </nav>
    <main class="content">
      <!-- partial:partials/_introduction.html --><h2><a href="#introduction" id="introduction">Introduction</a></h2>
<p>Agrilyst provides a <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST compatible</a> API interface that allows users to send metric data into the system for sensors.  This documentation is for the API version 2.0. It may be incompatible with previous or future API versions.  Please be sure you are using the correct documentation.</p>
<!-- partial -->
      <!-- partial:partials/_apiaccount.html --><h2><a href="#apiaccount" id="apiaccount">API Account</a></h2>
<p>API accounts are per user. By using your access token, you will be able to use the API.</p>
<!-- partial -->
      <!-- partial:partials/_authentication.html --><h2><a href="#authentication" id="authentication">Authentication</a></h2>
<p>
  The API requires HTTP Basic Authentication for every request. All requests must be sent over HTTPS.
  Authentication is accomplished with a user and token pair.  User is the email address that you used to create your account and token is the API token that can be found on the <a href="https://portal.agrilyst.com/apikey">API keys</a> page.
</p>

<p>
  <em>Note: API Tokens have been shortened for the purposes of this documentation. Your real API token will be longer.</em>
</p>

<p>
  A user with an email address <code>example@agrilyst.com</code> and an API token of <code>75AFDB82</code> will use the following command:
</p>

<pre><code class='curl'>curl -u example@agrilyst.com:75AFDB82 https://api.agrilyst.com/api/v2/
</code></pre>

<h3>URL Encoding</h3>
<p>To use URL encoding, use the following format:</p>

<pre><code class='bash'>https://user:token@api.agrilyst.com/api/v2/
</code></pre>

<p>
  Because the <code>user</code> value is an email address, it has to be escaped in order to form a valid URL. The <code>@</code> sign is represented by the <code>%40</code> entity. For example:
</p>

<pre><code class='curl'>curl https://example%40agrilyst.com:75AFDB82@api.agrilyst.com/api/v2/
</code></pre>

<p>
  <em>Note: cURL automatically converts the <code>@</code> to a <code>%40</code> if you use the <code>-u</code> option, but not if you put authentication in the URL directly.</em>
</p>
<!-- partial -->
      <!-- partial:partials/_health.html --><h2><a href="#health" id="health">GET /health - Health Check</a></h2>
<p>This check is the only API check that does not require authentication.  The health check endpoint returns a 200 OK if the API is up and working. Any other status indicates a failure in the API.</p>
<h3>Command:</h3>
<pre><code class='curl'>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/health
</code></pre>

<h3>Successful Return:</h3>
<pre><code>{"health":"OK"}
</code></pre>
<p>
  Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_version.html --><h2><a href="#version" id="version">GET /version - Version</a></h2>
<p>This check returns the API version. The version endpoint returns a 200 OK and the version number.</p>
<h3>Command:</h3>
<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/version
</code></pre>

<h3>Successful Return:</h3>
<pre><code>{"version":"2.0"}
</code></pre>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->

      <!-- partial:partials/_create-sensor.html --><h2><a href="#create-sensor" id="create-sensor">POST /sensors - Create Sensor</a></h2>
<p>
  Makes a new sensor in a facility. Check the <a href="#list-sensor-models">List Sensor Models</a> endpoint for acceptable inputs for the <code>model</code> parameter.
</p>

<p>
  Optionally, provide a <code>visible</code> flag set to <code>false</code> if you want to hide a sensor from being shown in the dashboard. By default <code>visible</code> is `true`, and sensors are shown in reports and the dashboard.
</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  -X POST \
  -d '{
    "sensor": {
      "name": "Greenhouse 1 Sensor",
      "model": "priva",
      "facility_id": 98765
    },
  }'
  https://api.agrilyst.com/api/v2/sensors
</code></pre>

<h3>Successful Return:</h3>
<p>
Status Code(s): 201
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_list-sensors.html --><h2><a href="#list-sensors" id="list-sensors">GET /sensors - List Sensors</a></h2>
<p>This endpoint displays all available sensors for your organization.</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/sensors
</code></pre>

<h3>Successful Return:</h3>
<pre><code>[{
  "id": 1,
  "name": "Sensor 1",
  "model": "priva",
  "visible": "true",
  "status": "active"
}, {
  "id": 2,
  "name": "Sensor 2",
  "model": "wadsworth",
  "visible": "true",
  "status": "active"
}]</code></pre>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_show-sensor.html --><h2><a href="#show-sensor" id="show-sensor">GET /sensor/:id - Show Sensor</a></h2>
<p>Get data for a specific sensor in a facility.</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/sensors/123456
</code></pre>

<h3>Successful Return:</h3>
<pre><code>{
  "id": 1,
  "name": "Sensor 1",
  "model": "priva",
  "visible": "true",
  "status": "active"
}</code></pre>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_update-sensor.html --><h2><a href="#update-sensor" id="update-sensor">PUT /sensors/:id - Update Sensor</a></h2>
<p>
  Updates a sensor with new information. In this example, the sensor ID to update is <code>123456</code>. Fields that can be changed are <code>name</code>, <code>model</code>, and <code>visible</code>. Check the <a href="#list-sensor-models">List Sensor Models</a> endpoint for acceptable inputs for the <code>model</code> parameter.
</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  -X PUT \
  -d '{
    "sensor": {
      "name": "Greenhouse 1 Sensor",
    },
  }'
  https://api.agrilyst.com/api/v2/sensors/123456
</code></pre>

<h3>Successful Return:</h3>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_remove-sensor.html --><h2><a href="#remove-sensor" id="remove-sensor">DELETE /sensors/:id - Remove Sensor</a></h2>
<p>Removes the sensor with the given ID (in this example, <code>123456</code>).</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  -X DELETE
  https://api.agrilyst.com/api/v2/sensors/123456
</code></pre>

<h3>Successful Return:</h3>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->

      <!-- partial:partials/_list-sensor-metrics.html --><h2><a href="#list-sensor-metrics" id="list-sensor-metrics">GET /sensors/:sensor_id/sensor_metrics - List Sensor Metrics</a></h2>
<p class='deprecated'><em>Note:</em> This endpoint is accessible via GET /metrics but this URL is deprecated and will be removed.</p>
<p>This endpoint displays all available metrics for a sensor. You must specify a sensor ID in the request. It returns an array of JSON hashes representing each sensor metric.</p>

<pre><code class='bash'>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/sensors/1/sensor_metrics
</code></pre>

<h3>Successful Return:</h3>
<pre><code>[{
  "id": 1,
  "metric": "meas grh temp",
  "metric_units": "°C",
  "description": "Zone Greenhouse Temperature"
}, {
  "id": 2,
  "metric": "meas CO2",
  "metric_units": "ppm",
  "description": "Zone CO2 Concentration"
}]
</code></pre>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->

      <!-- partial:partials/_save-sensor-data.html --><h2><a href="#save-sensor-data" id="save-sensor-data">POST /sensor_data - Save Sensor Data</a></h2>
<p class='deprecated'><em>Note:</em> This endpoint is accessible via POST /metrics but this URL is deprecated and will be removed.</p>
<p>This endpoint accepts a POST method and saves data recordings for a sensor. It expects three values: a sensor metric ID, a timestamp, and a value. It returns a 200 OK with a status for each metric.</p>

<pre><code class='bash'>curl \
  -u example@agrilyst.com:75AFDB82 \
  -X POST \
  -d '{
    "metrics": [
      { "id": 2,
       "value": 42,
       "time": 1471979056
      },
      { "id": 2,
       "value": 55,
       "time": 1471979057
      },
    ]
  }'
  https://api.agrilyst.com/api/v2/metrics</code></pre>

<h3>Successful Return:</h3>
<p>
  Status Code(s): 200, list of metrics and status
</p>
<pre><code>{
  "status": 200,
  "message": {
    "id=2, time=1471979056, value=42": "saved",
    "id=2, time=1471979057, value=55": "saved"
  }
}</code></pre>
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->

      <!-- partial:partials/_list-tanks.html --><h2><a href="#list-tanks" id="list-tanks">GET /tanks - List Tanks</a></h2>
<p>This endpoint displays all available metrics for tanks. You can specify a tank ID in the request. It returns a JSON array.</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/tanks</code></pre>

<h3>Successful Return:</h3>
<pre><code>[{
  "id": 1,
  "name": "Tank A",
  "capacity": 7641,
  "status": "active"
}, {
  "id": 2,
  "name": "Tank B",
  "capacity": 6644,
  "status": "active"
}, {
  "id": 3,
  "name": "Tank C",
  "capacity": 8526,
  "status": "active"
}]</code></pre>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_list-tank-metrics.html --><h2><a href="#list-tank-metrics" id="list-tank-metrics">GET /tank_metrics - List Tank Metrics</a></h2>
<p>This endpoint displays all available metrics for a tank. It returns a JSON array of common and organization specific tank metrics.</p>

<pre><code>curl \
  -u example@agrilyst.com:75AFDB82 \
  https://api.agrilyst.com/api/v2/tank_metrics
</code></pre>

<h3>Successful Return:</h3>
<pre><code>[{
  "id": 1,
  "name": "pH",
  "units": "numeric"
}, {
  "id": 2,
  "name": "Temperature",
  "units": "degrees"
}, {
  "id": 3,
  "name": "EC",
  "units": "numeric"
}]</code></pre>
<p>
Status Code(s): 200
</p>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->
      <!-- partial:partials/_save-tank-reading.html --><h2><a href="#save-tank-reading" id="save-tank-reading">POST /tank_reading - Save Tank Reading</a></h2>
<p>This endpoint accepts a POST method and saves a reading for a tank. A reading is comprised of a tank_reading object, and several metric objects. It returns a 200 OK with a status for each metric.</p>

<pre><code class='bash'>curl \
  -u example@agrilyst.com:75AFDB82 \
  -X POST \
  -d '{
    "tank_reading": {
      "tank_id": 2,
      "time": 1486142194
      "overwrite": true
    },
    "metrics": [
      { "id": 2,
        "value": 4.5
      },
      { "id": 3,
        "value": 50
      }
    ]
  }'
  https://api.agrilyst.com/api/v2/tank_reading
</code></pre>

<h3>Successful Return:</h3>
<p>
Status Code(s): 200, list of metrics and status
</p>
<pre><code>{
  "status": 200,
  "message": {
    "id=2, time=1471979056, value=42": "saved",
    "id=2, time=1471979057, value=55": "saved"
  }
}</code></pre>

<h3>Failed Return:</h3>
<p>
Status Code(s): Timeout, Any 4xx or 5xx status code
</p>
<!-- partial -->

      <br><br><br><br><br>

    </main>
  </div>


  <footer class="footer">
    <div class="inner">

      <div class="footer__section">
        <ul class="footer__menu">
          <li class="footer__menu--item"><a href="https://portal.agrilyst.com/pages/privacy_policy">Privacy Policy</a></li>
          <li class="footer__menu--item"><a href="https://portal.agrilyst.com/pages/terms">Terms of Use</a></li>
          <li class="footer__menu--item"><a href="https://portal.agrilyst.com/">Login</a></li>
        </ul>

        <img src="/api/docs/assets/img/agrilyst-logo.png" alt="agrilyst" class="footer__logo">
      </div>

      <div class="footer__section">
        <div class="footer__box">
          <h3>Agrilyst Inc.</h3>
          <address>68 Jay St, Suite 201<br>
          Brooklyn, NY 11201</address>
        </div>


        <div class="footer__box">
          <h3>Call Us</h3>
          <a href="tel:646-719-0304">646-719-0304</a>
        </div>

        <div class="footer__box">
          <h3>Email Us</h3>
          <a href='mai&#108;to&#58;i&#110;&#102;o&#64;&#97;gril&#37;79&#115;t&#46;%63&#111;%6D'>info&#64;a&#103;r&#105;lyst&#46;com</a>
        </div>

        <div class="footer__box footer__box--social">
          <h3>Follow Us</h3>
          <ul class="footer__social-menu">
            <li class="footer__social-menu--item"><a href="http://facebook.com/agrilyst"><img src="/api/docs/assets/img/facebook.png" alt="facebook"></a></li>
            <li class="footer__social-menu--item"><a href="http://twitter.com/agrilyst"><img src="/api/docs/assets/img/twitter.png" alt="twitter"></a></li>
            <li class="footer__social-menu--item"><a href="http://instagram.com/agrilyst"><img src="/api/docs/assets/img/instagram.png" alt="instagram"></a></li>
          </ul>
        </div>
      </div>

    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../assets/js/scripts.min.js"></script>
</body>
</html>
